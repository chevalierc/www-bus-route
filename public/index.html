<html >
<head>
    <meta name="google-signin-client_id"
          content="25035479121-c25jn4mdujb6jrb2h726m7m8c8i7cih3.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
    <!-- jquery 3.x minified -->
    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
    <script src="https://apis.google.com/js/api:client.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>

    <script>
        var googleUser = {};
        var startApp = function () {
            gapi.load('auth2', function () {
                // Retrieve the singleton for the GoogleAuth library and set up the client.
                auth2 = gapi.auth2.init({
                    client_id: '25035479121-c25jn4mdujb6jrb2h726m7m8c8i7cih3.apps.googleusercontent.com',
                    cookiepolicy: 'single_host_origin'
                    // Request scopes in addition to 'profile' and 'email'
                    //scope: 'additional_scope'
                });
                attachSignin(document.getElementById('customBtn'));
            });
        };

        function attachSignin(element) {
            console.log(element.id);
            auth2.attachClickHandler(element, {},
                function (googleUser) {
                    document.getElementById('name').innerText = "Signed in: " +
                        googleUser.getBasicProfile().getName();
                }, function (error) {
                    alert(JSON.stringify(error, undefined, 2));
                });
        }
    </script>



</head>
<body ng-app="routeList">
<!-- navigation bar -->
<div class="container">
    <nav class="navbar navbar-light" style="background-color: #e3f2fd;">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">
                    <span class="glyphicon glyphicon-home"></span>
                </a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="cr_commute.html">Create Commutes</a></li>
                <li><a href="#">Commutes</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li style="float:left">
                    <div id="gSignInWrapper">

                        <div id="customBtn" class="customGPlusSignIn">
                            <span class="icon"></span>
                            <span class="buttonText" id="name">Sign In</span>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </nav>


<!--Content-->
<div>


    <routes-list></routes-list>

</div>

</div>

<!-- Sticky footer -->
<footer class="footer">
    <div class="container">
        <p class="text-muted">Created by Andrew Hart, Chris Chevaleir, and Kevin Cotter for credit in a course taught by
            Jones Yu @ Wentworth Institute of Technology
        </p>
    </div>
</footer>
<script>
angular.
module('routeList', []);

angular.
module('routeList').
component('routesList', {
  template: `
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Proposed Changes</th>


      </tr>
    </thead>
    <tbody>
  <tr ng-repeat="route in $ctrl.routes">
  <td >
      <div class="row">
        <div class="col-md-1">
         <span ng-style="route.color" ng-click="$ctrl.upVote(route)" style="display: table; margin: auto; font-size: 45px"class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
         <h2> {{route.upVotes}} </h2>
</div>
        <div class="col-md-6">
          <div class="row" >
            <h2 style="margin-top:0px">{{route.title}}</h2>
          </div>
          <div class="row">
            <p>{{route.snippet}}</p>
          </div>
          <div class="row">
            <a href="#"> {{route.comments}} Comments</a>
          </div>
        </div>
      </div>
  </td>
  </tr>
  </tbody>
</tables>`,
  controller:['$scope', function PhoneListController($scope) {
    this.routes = [
      {
        id:"1",
        title: 'Bus to Cambridge',
        snippet: 'this bus will go to Cambridge.',
        comments: 1,
        upVotes : 140,
        color: {}
      }, {
        id:"2",
        title: 'Bus from fort point to Sommerville',
        snippet: 'This bus will go from Fort Point ot Sommerville through down town boston',
        comments: 2,
        upVotes : 34,
        color: {}
      }, {
        id:"2",
        title: 'Bus to go through quincy to Braintree',
        snippet: 'this bus will go to Braintree through Quincy.',
        comments: 3,
        upVotes : 12,
        color: {}
      }
    ];

  this.upVote = function(route){
    if(route.color['color'] =='red'){
      route.color = {'color': 'black'};
      route.upVotes = route.upVotes - 1;
    }else{
      route.color={'color': 'red'};
      route.upVotes = route.upVotes + 1;
    }
  }

  } ]
});

</script>

<script>startApp();</script>


</body>
</html>
